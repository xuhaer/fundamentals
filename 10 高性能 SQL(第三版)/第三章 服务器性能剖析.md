# 第三章 服务器性能剖析

## 3.1.1 通过性能剖析进行优化

性能剖析是测量和分析时间花费在哪里的主要方法。性能剖析一般有两个步骤：测量任务所花费的时间；然后对结果进行统计和排序，将重要的任务排到前面。

我们将实际地讨论两种类型的性能剖析：基于执行时间的分析和基于等待的分析**。基于执行时间的分析研究的是什么任务的执行时间最长， 而基于等待的分析则是判断任务在什么地方被阻塞的时间最长**。



**捕获 MySQL 的查询到日志文件中**

可以通过设置 `long_query_time=0`来捕获所有的查询。其开销低、精度高，不过需要注意部署日志轮转(log rotation)以避免可能消耗大量的磁盘空间。

